/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/search.js":
/*!***********************!*\
  !*** ./src/search.js ***!
  \***********************/
/***/ (() => {

eval("console.log(\"search coin script linked\");\r\n\r\nvar baseUrl = \"https://api.coinranking.com/v2/coins\";\r\nvar proxyUrl = \"https://cors-anywhere.herokuapp.com/\";\r\nvar apiKey = \"4f508b14-de1b-4bce-9b14-821a68f239b4\";\r\nvar apiKey2 = \"55a006ab-f2d6-4c80-8708-72443e9abc6d\";\r\n\r\n//GRAPH\r\nasync function createChart(graphData){\r\n    console.log(\"chart generated.\");\r\n    const ctx = await document.getElementById('myChart').getContext('2d');\r\n    const myChart = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n            labels: ['-24h','-23h','-22h','-21h','-20h','-19h','-18h','-17h','-16h','-15h','-14h','-13h','-12h','-11h','-10h','-9h','-8h','-7h','-6h','-5h','-4h','-3h','-2h','-1h', 'Now'],\r\n            datasets: [{\r\n                label: '24h price movement',\r\n                data: graphData,\r\n          \r\n                backgroundColor: [\r\n                    'rgba(0, 2, 252)'\r\n                ],\r\n                borderColor: [\r\n                    'rgba(0, 2, 252)'\r\n                ],\r\n                borderWidth: 1\r\n            }]\r\n        },\r\n        options: {\r\n          maintainAspectRatio: false,\r\n            scales: {\r\n                y: {\r\n                    beginAtZero: false\r\n                }\r\n            }\r\n        }\r\n    });\r\n    };\r\n  \r\n//SEARCH\r\nasync function searchScript(searchSymbol) {\r\n\r\n    var url = `${proxyUrl}${baseUrl}?symbols[]=${searchSymbol}`;\r\n  \r\n    const resp = await fetch(`${url}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-My-Custom-Header': `${apiKey}`,\r\n        'Access-Control-Allow-Origin': \"*\"\r\n      }\r\n    })\r\n  \r\n    const searchedCoinRaw = await resp.json();\r\n  \r\n    console.log(searchedCoinRaw);\r\n  \r\n    const searchedCoinResult = searchedCoinRaw.data.coins[0];\r\n  \r\n    console.log(searchedCoinResult);\r\n  \r\n    var coinPageString = \"\";\r\n  \r\n    let changeColor = \"\";\r\n  \r\n      changeColor = \"\";\r\n  \r\n      var volume = \"24hvolume\";\r\n      let changeVariable = searchedCoinResult.change;\r\n      if(changeVariable.charAt(0) == \"-\"){\r\n        changeColor += \"red\";\r\n      } else {\r\n        changeColor += \"green\";\r\n      }\r\n      let slicedPrice = searchedCoinResult.price.slice(0,10);\r\n      coinPageString += `<form action=\"https://gregory-vettorel-backend.herokuapp.com/list\" method=\"POST\" id=\"form\">\r\n      <label for=\"uuid\"></label>\r\n      <input style=\"display:none\" type=\"text\" name=\"uuid\" id=\"uuid\" for=\"uuid\" value=\"${searchedCoinResult.uuid}\">\r\n      <label for=\"name\"></label>\r\n      <input style=\"display:none\" type=\"text\" name=\"name\" id=\"name\" for=\"name\" value=\"${searchedCoinResult.name}\">\r\n      <label for=\"iconUrl\"></label>\r\n      <input style=\"display:none\" type=\"text\" name=\"iconUrl\" id=\"iconUrl\" for=\"iconUrl\" value=\"${searchedCoinResult.iconUrl}\">\r\n      <label for=\"price\"></label>\r\n      <input style=\"display:none\" type=\"text\" name=\"price\" id=\"price\" for=\"price\" value=\"${slicedPrice}\">\r\n      <label for=\"marketCap\"></label>\r\n      <input style=\"display:none\" type=\"text\" name=\"marketCap\" id=\"marketCap\" for=\"marketCap\" value=\"${searchedCoinResult.marketCap}\">\r\n      \r\n      <!-- SHOWN HTML -->\r\n      <div class=\"coin-info-top\">\r\n      <div class=\"coin-info-left-div\">\r\n      <img src=\"${searchedCoinResult.iconUrl}\" class=\"coin-info-img\"/>\r\n      <h2 class=\"coin-info-name\">${searchedCoinResult.name}</h2>\r\n      </div>\r\n      <input type=\"submit\" id=\"addListButton\" value=\"Add to my list\">\r\n      </div>\r\n      <div class=\"chart-wrapper\">\r\n          <div class=\"coin-info-left-chart-div\">\r\n          <p class=\"coin-info-price\">$${searchedCoinResult.price} USD</p>\r\n          <p class=\"coin-info-change\" style=\"color: ${changeColor}\">${searchedCoinResult.change}%</p>\r\n          </div>\r\n          <div class=\"coin-info-right-div\">\r\n              <p class=\"coin-info-market\">Market cap: $${searchedCoinResult.marketCap}</p>\r\n              </div>\r\n          <canvas id=\"myChart\" width=\"200\" height=\"200\"></canvas>\r\n      </div></form>`;\r\n\r\n      document.getElementById(\"index-body\").innerHTML = coinPageString;\r\n  \r\n    //CREATING THE GRAPH\r\n    const graphData = searchedCoinResult.sparkline;\r\n    //console.log(graphData);\r\n    createChart(graphData);\r\n  };\r\n\r\nlet searchFunction = event => {\r\n    event.preventDefault();\r\n    let value = document.getElementById('searchInputSymbol').value;\r\n    console.log(value);\r\n    searchScript(value);\r\n};\r\n\r\ndocument.getElementById(\"form\").addEventListener('submit', e => {\r\n  e.preventDefault();\r\n \r\n  let name = document.getElementById(\"name\").value;\r\n  let uuid = document.getElementById(\"uuid\").value;\r\n  let price = document.getElementById(\"price\").value;\r\n  let iconUrl = document.getElementById(\"iconUrl\").value;\r\n  let marketCap = document.getElementById(\"marketCap\").value;\r\n});\r\n\r\ndocument.getElementById('searchForm').addEventListener('submit', searchFunction);\n\n//# sourceURL=webpack://web2-frontend-gregoryvettorel2/./src/search.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/search.js"]();
/******/ 	
/******/ })()
;